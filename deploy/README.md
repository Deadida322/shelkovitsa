# Конфигурация развертывания проекта Shelkovitsa

## Описание

Данная папка содержит все необходимые файлы для развертывания проекта Shelkovitsa на Ubuntu сервере.

## Структура файлов

- `nginx.conf` - основная конфигурация nginx для продакшена (HTTP + HTTPS)
- `nginx-http-only.conf` - конфигурация nginx только для HTTP (для первоначальной настройки)
- `nginx-env.conf` - переменные окружения и настройки для разных сред
- `step-by-step-setup.md` - пошаговая инструкция по настройке (рекомендуется)
- `deployment-guide.md` - подробное руководство по развертыванию
- `enable-https.sh` - скрипт для включения HTTPS редиректа после получения SSL

## Быстрый старт

1. Скопируйте файлы на Ubuntu сервер
2. Следуйте инструкциям в `step-by-step-setup.md` (рекомендуется)
3. Настройте переменные окружения
4. Запустите приложение

## Решение проблемы с SSL сертификатами

1. **Сначала** используйте `nginx-http-only.conf` для первоначальной настройки
2. **Затем** получите SSL сертификаты с помощью certbot
3. **После** получения сертификатов переключитесь на `nginx.conf`
4. **Используйте** `enable-https.sh` для включения HTTPS редиректа

## Основные компоненты

- **Nginx** - веб-сервер и reverse proxy
- **NestJS API** - серверная часть (порт 3000)
- **Nuxt.js** - клиентская часть (статические файлы)
- **PostgreSQL** - база данных
- **PM2** - менеджер процессов Node.js
- **Let's Encrypt** - SSL сертификаты

## Безопасность

Конфигурация включает:
- SSL/HTTPS настройки
- Заголовки безопасности
- Rate limiting
- Блокировку вредоносных запросов
- Ограничение доступа к системным файлам

## Мониторинг

Настроены:
- Логирование всех запросов
- Ротация логов
- Автоматические бэкапы
- Health checks
- Мониторинг ресурсов

## Поддержка

При возникновении проблем:
1. Проверьте логи: `sudo tail -f /var/log/nginx/error.log`
2. Проверьте статус сервисов: `sudo systemctl status nginx`
3. Обратитесь к разделу Troubleshooting в `ubuntu-deployment.md`
